<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

</body>
<script>
    // https://www.nowcoder.com/test/question/done?tid=16209873&qid=163605#summary
    // https://www.cnblogs.com/andy-zhou/p/5360107.html
    // cookie的机制
    // cookie可以弥补http协议无状态的不足,session出现之前，基本上所有的网站都采用cookie来跟踪会话
    // 浏览器会将cookie放在磁盘上的某个位置,再次请求服务器的时候放在http请求头里面
    // 实际上可以理解为cookie就是http的一个扩展，有两个http头专门用来传送cookie的，分别是Set-Cookie以及Cookie
    // 如果cookie的生存时间是整个会话期间的话，那么浏览器会将cookie保存在内存中，浏览器关闭时就会自动清除这个cookie
    // 如果cookie要保存很长时间，那么要保存在客户端的硬盘中
    // 一个cookie的设置可以分为四个步骤
    // 1: HTTP Request
    // 2: HTTP Response + Set-Cookie
    // 3: HTTP Request + Cookie
    // 4: HTTP Response
    // 5: 但是cookie有可能突然被禁用

    // 客户端请求服务器，如果服务器需要记录该用户状态，就给客户端发送一个cookie，客户端浏览器会把cookie保存起来，下次请求时带上，以此来辨认用户状态
    // 服务器也可以根据需要修改cookie内容

    // java设置cookie javax.servlet.http.Cookie类
    // java中每个cookie都是该cookie的对象
    // 服务器通过操作Cookie类对象对客户端Cookie进行操作
    // 通过request.getCookie()获取客户端提交的所有Cookie（以Cookie[]数组形式返回），通过response.addCookie(Cookie cookie)向客户端设置Cookie。
    // Cookie对象使用key-value属性对的形式保存用户状态，一个Cookie对象保存一个属性对，一个request或者response同时使用多个Cookie。因为Cookie类位于包javax.servlet.http.*下面，所以JSP中不需要import该类。
    // Cookie是不能跨域的
    // Cookie一般由后端设置，前端也就只能修改本域的cookie
    // js修改cookie的方法
//    document.cookie = "name" + username;
    // cookie是以键值对的形式存储的，各个cookie之间一般是以\;分隔
//    var username = document.cookie.split(';')[0].split('=')[1];
//    function setCookie(name, value){
//        var Days = 30;
//        var exp = new Date();
//        exp.setTime(exp.getTime() + Days*24*60*60*1000);
//        document.cookie = name + "=" + escape(value) + ";expires=" + exp.toGMTString();
//    }
//    console.log(document.cookie);

    // session和cookie不同的地方在于session保存在服务器上
    // 为了获得更高的存取速度，服务器一般把session放在内存里,每个用户都会有一个独立的session
    // session在用户第一次访问服务器的时候自动创建，session生成后，只要用户继续访问
    // 服务器就会更新session的最后访问时间，并维护该session
    // 为了防止内存溢出，服务器会把超时的session删除掉，如果超过了时间还没有访问过服务器，那么就删除掉该用户的session
    // session仍然需要cookie来支持，http是无状态协议，无法依据http来判断是否是同一用户
    // 所以服务端会向浏览器发送一个名为JSESSIONID的cookie，它的值为该session的id，session依据这个cookie来判断是否为同一用户
    // cookie不是很安全，别人可以分析存放在本地的cookie并且进行cookie欺骗，用session更安全一些
</script>
</html>